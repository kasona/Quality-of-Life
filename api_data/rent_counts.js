"use strict";

var topics = [
[
"2015-09-30",
6090
],
[
"2015-08-31",
6525
],
[
"2015-07-31",
6100
],
[
"2015-06-30",
5891
],
[
"2015-05-31",
5255
],
[
"2015-04-30",
4417
],
[
"2015-03-31",
4593
],
[
"2015-02-28",
3687
],
[
"2015-01-31",
3575
],
[
"2014-12-31",
3227
],
[
"2014-11-30",
3364
],
[
"2014-10-31",
4280
],
[
"2014-09-30",
4795
],
[
"2014-08-31",
4454
],
[
"2014-07-31",
4581
],
[
"2014-06-30",
4084
],
[
"2014-05-31",
4644
],
[
"2014-04-30",
4754
],
[
"2014-03-31",
4385
],
[
"2014-02-28",
6338
],
[
"2014-01-31",
6490
],
[
"2013-12-31",
7335
],
[
"2013-11-30",
10121
],
[
"2013-10-31",
6879
],
[
"2013-09-30",
6333
],
[
"2013-08-31",
9119
],
[
"2013-07-31",
10719
],
[
"2013-06-30",
6823
],
[
"2013-05-31",
6097
],
[
"2013-04-30",
6023
],
[
"2013-03-31",
6227
],
[
"2013-02-28",
6207
],
[
"2013-01-31",
6138
],
[
"2012-12-31",
5639
],
[
"2012-11-30",
5040
],
[
"2012-10-31",
5317
],
[
"2012-09-30",
6504
],
[
"2012-08-31",
6628
],
[
"2012-07-31",
5928
],
[
"2012-06-30",
5832
],
[
"2012-05-31",
5173
],
[
"2012-04-30",
4823
],
[
"2012-03-31",
4655
],
[
"2012-02-29",
4623
],
[
"2012-01-31",
4442
],
[
"2011-12-31",
4395
],
[
"2011-11-30",
4394
],
[
"2011-10-31",
4289
],
[
"2011-09-30",
4670
],
[
"2011-08-31",
4240
],
[
"2011-07-31",
3542
],
[
"2011-06-30",
3178
],
[
"2011-05-31",
4402
],
[
"2011-04-30",
4899
],
[
"2011-03-31",
7069
],
[
"2011-02-28",
6675
],
[
"2011-01-31",
3970
],
[
"2010-12-31",
2986
],
[
"2010-11-30",
1723
],
[
"2010-10-31",
1918
],
[
"2010-09-30",
1889
],
[
"2010-08-31",
1291
],
[
"2010-07-31",
1763
],
[
"2010-06-30",
1787
],
[
"2010-05-31",
2189
],
[
"2010-04-30",
2095
],
[
"2010-03-31",
2016
],
[
"2010-02-28",
1557
]
];

var years = {};   // get the average for the years;
for (var i = 0; i < topics.length; i++) {
  var num = topics[i][0].substring(0, 4);
  if (!years[num])
    years[num] = { name: num, val: 0, count: 0 };
  years[num].count++;
  years[num].val += topics[i][1];
}
var formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });
var prices = Object.keys(years).map(function(key) { return years[key]; });

for (var i = 0; i < prices.length; i++) {
  prices[i].val = formatter.format(prices[i].val / prices[i].count);
}
prices.reverse();       // put latest years first;

module.exports = prices;

// http://www.quandl.com/api/v3/datasets/ZILL/C00033_HR.json?limit=72
// C00033 = city code for Miami, _HR = # of homes rented; https IS PREFERRED OVER http;
